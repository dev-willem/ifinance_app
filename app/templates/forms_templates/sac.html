{% from "components/simulation_table.html" import render_simulation_table %}

{% block main_content %}
<section class="simulation-container">
    <h2>SISTEMA DE AMORTIZAÇÃO CONSTANTE - SAC</h2>

    <form method="post" action="/simulate/sac" class="simulation-form">
        <div class="form-group">
            <label for="saldo-s">Saldo Devedor (R$):</label>
            <input type="number" name="principal_value" id="saldo-s" placeholder="Ex: 100000" required value="{{ principal_value | default('') }}">
        </div>

        <div class="form-group">
            <label for="prazo-s">Prazo (meses):</label>
            <input type="number" name="months" id="prazo-s" placeholder="Ex: 120" required value="{{ months | default('') }}">
        </div>

        <div class="form-group">
            <label for="juros-s">Taxa de Juros (% a.m.):</label>
            <input type="number" step="0.01" name="interest_rate" id="juros-s" placeholder="Ex: 0.85" required value="{{ interest_rate | default('') }}">
        </div>

        <button type="submit" class="btn success">Simular Agora</button>
    </form>

    {% if tabela %}
        {{ render_simulation_table(
            titulo="Resultado da Simulação SAC", 
            tabela=tabela, 
            resumo={
                "capital_inicial": capital_inicial,
                "juros_totais": juros_totais,
                "montante": montante,
                "prazo": prazo,
                "taxa_juros": taxa_juros
            }
        ) }}
    {% endif %}

    {% if erro %}
        <div class="alert error">
            <p><strong>Erro:</strong> {{ erro }}</p>
        </div>
    {% endif %}
</section>
{% endblock %}
